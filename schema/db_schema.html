<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <title>DB Schema - Caseflow Docs</title>
    <link
      rel="shortcut icon"
      href="/caseflow/favicon.ico"
      type="image/x-icon"
    />
    <link
      rel="stylesheet"
      href="/caseflow/assets/css/just-the-docs-default.css"
    />
    <script src="/caseflow/assets/js/vendor/lunr.min.js"></script>
    <script src="/caseflow/assets/js/just-the-docs.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Begin Jekyll SEO tag v2.8.0 -->
    <title>DB Schema | Caseflow Docs</title>
    <meta name="generator" content="Jekyll v3.9.2" />
    <meta property="og:title" content="DB Schema" />
    <meta property="og:locale" content="en_US" />
    <meta name="description" content="Documentation for Caseflow" />
    <meta property="og:description" content="Documentation for Caseflow" />
    <link rel="canonical" href="/caseflow/schema/db_schema.html" />
    <meta property="og:url" content="/caseflow/schema/db_schema.html" />
    <meta property="og:site_name" content="Caseflow Docs" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="DB Schema" />
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebPage",
        "description": "Documentation for Caseflow",
        "headline": "DB Schema",
        "url": "/caseflow/schema/db_schema.html"
      }
    </script>
    <!-- End Jekyll SEO tag -->
  </head>
  <body>
    <a class="skip-to-main" href="#main-content">Skip to main content</a>
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none">
      <symbol id="svg-link" viewbox="0 0 24 24">
        <title>Link</title>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewbox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-link"
        >
          <path
            d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"
          ></path>
          <path
            d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"
          ></path>
        </svg>
      </symbol>
      <symbol id="svg-search" viewbox="0 0 24 24">
        <title>Search</title>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewbox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-search"
        >
          <circle cx="11" cy="11" r="8"></circle>
          <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
      </symbol>
      <symbol id="svg-menu" viewbox="0 0 24 24">
        <title>Menu</title>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewbox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-menu"
        >
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </symbol>
      <symbol id="svg-arrow-right" viewbox="0 0 24 24">
        <title>Expand</title>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewbox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-chevron-right"
        >
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </symbol>
      <symbol id="svg-doc" viewbox="0 0 24 24">
        <title>Document</title>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewbox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="feather feather-file"
        >
          <path
            d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"
          ></path>
          <polyline points="13 2 13 9 20 9"></polyline>
        </svg>
      </symbol>
      <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE -->
      <symbol
        id="svg-external-link"
        width="24"
        height="24"
        viewbox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="feather feather-external-link"
      >
        <title id="svg-external-link-title">(external link)</title>
        <path
          d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"
        ></path>
        <polyline points="15 3 21 3 21 9"></polyline>
        <line x1="10" y1="14" x2="21" y2="3"></line>
      </symbol>
    </svg>
    <div class="side-bar">
      <div class="site-header">
        <a href="/caseflow/" class="site-title lh-tight"> Caseflow Docs </a>
        <a href="#" id="menu-button" class="site-button">
          <svg viewbox="0 0 24 24" class="icon">
            <use xlink:href="#svg-menu"></use>
          </svg>
        </a>
      </div>
      <nav aria-label="Main" id="site-nav" class="site-nav">
        <ul class="nav-list">
          <li class="nav-list-item">
            <a href="/caseflow/README.html" class="nav-list-link">README</a>
          </li>
          <li class="nav-list-item">
            <a href="/caseflow/workflows/" class="nav-list-link">Workflows</a>
          </li>
          <li class="nav-list-item active">
            <a
              href="/caseflow/schema/db_schema.html"
              class="nav-list-link active"
              >DB Schema</a
            >
          </li>
          <li class="nav-list-item">
            <a
              href="#"
              class="nav-list-expander"
              aria-label="toggle links in Caseflow Queue category"
            >
              <svg viewbox="0 0 24 24">
                <use xlink:href="#svg-arrow-right"></use>
              </svg> </a
            ><a href="/caseflow/caseflow-queues/" class="nav-list-link"
              >Caseflow Queue</a
            >
            <ul class="nav-list">
              <li class="nav-list-item">
                <a
                  href="/caseflow/caseflow-queues/automatic_case_distribution.html"
                  class="nav-list-link"
                  >Automatic Case Distribution</a
                >
              </li>
              <li class="nav-list-item">
                <a
                  href="/caseflow/caseflow-queues/tasks.html"
                  class="nav-list-link"
                  >Tasks</a
                >
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <footer class="site-footer">
        This site uses
        <a href="https://github.com/just-the-docs/just-the-docs"
          >Just the Docs</a
        >, a documentation theme for Jekyll.
      </footer>
    </div>
    <div class="main" id="top">
      <div id="main-header" class="main-header">
        <div class="search">
          <div class="search-input-wrap">
            <input
              type="text"
              id="search-input"
              class="search-input"
              tabindex="0"
              placeholder="Search Caseflow Docs"
              aria-label="Search Caseflow Docs"
              autocomplete="off"
            />
            <label for="search-input" class="search-label"
              ><svg viewbox="0 0 24 24" class="search-icon">
                <use xlink:href="#svg-search"></use></svg
            ></label>
          </div>
          <div id="search-results" class="search-results"></div>
        </div>
        <nav aria-label="Auxiliary" class="aux-nav">
          <ul class="aux-nav-list">
            <li class="aux-nav-list-item">
              <a
                href="//github.com/department-of-veterans-affairs/caseflow"
                class="site-button"
              >
                Caseflow on GitHub
              </a>
            </li>
          </ul>
        </nav>
      </div>
      <div id="main-content-wrap" class="main-content-wrap">
        <div id="main-content" class="main-content" role="main">
          <p>This page is a resource to understand Caseflow’s database.</p>
          <h2 id="autogenerated-documentation">
            <a
              href="#autogenerated-documentation"
              class="anchor-heading"
              aria-labelledby="autogenerated-documentation"
              ><svg viewbox="0 0 16 16" aria-hidden="true">
                <use xlink:href="#svg-link"></use></svg
            ></a>
            Autogenerated documentation
          </h2>
          <p>These are the most up-to-date documentation.</p>
          <ul>
            <li>
              <a href="/caseflow/task_trees/schema/schema_diagrams"
                >Schema Diagrams</a
              >
            </li>
            <li>
              Schema CSVs
              <ul>
                <li>
                  <a href="/caseflow/task_trees/schema/caseflow_schema_csv"
                    >Caseflow Schema CSV</a
                  >
                </li>
                <li>
                  <a href="/caseflow/task_trees/schema/etl_schema_csv"
                    >ETL Schema CSV</a
                  >
                </li>
              </ul>
            </li>
          </ul>
          <h2 id="manual-documentation">
            <a
              href="#manual-documentation"
              class="anchor-heading"
              aria-labelledby="manual-documentation"
              ><svg viewbox="0 0 16 16" aria-hidden="true">
                <use xlink:href="#svg-link"></use></svg
            ></a>
            Manual documentation
          </h2>
          <p>
            See
            <a href="/caseflow/task_trees/data-model">Caseflow Data Model</a>.
          </p>
          <h3 id="participant-ids">
            <a
              href="#participant-ids"
              class="anchor-heading"
              aria-labelledby="participant-ids"
              ><svg viewbox="0 0 16 16" aria-hidden="true">
                <use xlink:href="#svg-link"></use></svg
            ></a>
            Participant IDs
          </h3>
          <p>
            A participant ID is provided by BGS to uniquely identify (1)
            Claimants (who may be Veterans) and (2) POA entities (which can be
            an organization or individual). Several tables refer to the
            participant ID by different names, depending on who they are
            referencing.
          </p>
          <p>
            A participant ID for a <strong>POA</strong> is usually named
            <code class="language-plaintext highlighter-rouge"
              >poa_participant_id</code
            >, for example in the DB tables:
            <code class="language-plaintext highlighter-rouge">appeals</code>,
            <code class="language-plaintext highlighter-rouge"
              >appellant_substitutions</code
            >,
            <code class="language-plaintext highlighter-rouge"
              >bgs_power_of_attorneys</code
            >, and
            <code class="language-plaintext highlighter-rouge"
              >unrecognized_appellants</code
            >. Some exceptions are the
            <code class="language-plaintext highlighter-rouge"
              >bgs_attorneys</code
            >
            and
            <code class="language-plaintext highlighter-rouge"
              >organizations</code
            >
            tables, which simply use
            <code class="language-plaintext highlighter-rouge"
              >participant_id</code
            >. Note: For the
            <code class="language-plaintext highlighter-rouge"
              >organizations</code
            >
            table, only organizations with
            <code class="language-plaintext highlighter-rouge"
              >type="Representative"</code
            >
            have a non-null
            <code class="language-plaintext highlighter-rouge"
              >participant_id</code
            >.
          </p>
          <p>
            A participant ID for a <strong>claimant or veteran</strong> goes by
            several names, such as
            <code class="language-plaintext highlighter-rouge"
              >claimant_participant_id</code
            >,
            <code class="language-plaintext highlighter-rouge"
              >veteran_participant_id</code
            >, and
            <code class="language-plaintext highlighter-rouge"
              >substitute_participant_id</code
            >. The
            <code class="language-plaintext highlighter-rouge">claimants</code>,
            <code class="language-plaintext highlighter-rouge">veterans</code>,
            <code class="language-plaintext highlighter-rouge">people</code>,
            and
            <code class="language-plaintext highlighter-rouge"
              >decision_issues</code
            >
            tables simply use
            <code class="language-plaintext highlighter-rouge"
              >participant_id</code
            >.
          </p>
          <h2 id="semi-automated-documentation">
            <a
              href="#semi-automated-documentation"
              class="anchor-heading"
              aria-labelledby="semi-automated-documentation"
              ><svg viewbox="0 0 16 16" aria-hidden="true">
                <use xlink:href="#svg-link"></use></svg
            ></a>
            Semi-automated documentation
          </h2>
          <ul>
            <li>
              Ever want to see the schema for a subset of tables? Paste excerpts
              from
              <a
                href="https://github.com/department-of-veterans-affairs/caseflow/blob/master/db/schema.rb"
                ><code class="language-plaintext highlighter-rouge"
                  >schema.rb</code
                ></a
              >
              and “Import” into http://dbdiagram.io/, then move the boxes around
              to your liking. Example
              <a href="https://dbdiagram.io/d/5ed6793d39d18f5553002077"
                >diagram of Document-related tables</a
              >
              and more in
              <a
                href="https://github.com/department-of-veterans-affairs/caseflow/issues/15510"
                >ticket #15510</a
              >.
            </li>
            <li>
              Extending previous work on parent-child task type relationships
              (such as
              <a
                href="https://github.com/department-of-veterans-affairs/appeals-team/blob/master/Project%20Folders/Tasks/tasktrees/docs-DR/freq-parentchild.md"
                >this for the DR docket</a
              >) and
              <a
                href="https://github.com/yoomlam/notes/blob/master/python_notebook/connect_postgres.ipynb"
                >playing with Jupyter notebook</a
              >, here’s an interactive graph showing
              <a
                href="https://htmlpreview.github.io/?https://github.com/yoomlam/notes/blob/master/python_notebook/ParentChildTaskTypeCounts.html"
                >parent-child task type relationships for all task trees in
                prod</a
              >
              as of July 19, 2020.
            </li>
            <li>
              <a
                href="https://docs.google.com/document/d/1uJ0Y8jPDWiJpqh-cOjWpFud9JqVrwy8GP5elG17lTZM/edit"
                >Some diagrams and documentation of Caseflow’s DB schema</a
              >
              created in Oct 2019.
            </li>
          </ul>
          <hr />
          <footer>
            <a href="#top" id="back-to-top">Back to top</a>
            <div class="d-flex mt-2">
              <p class="text-small text-grey-dk-000 mb-0">
                <a
                  href="https://github.com/department-of-veterans-affairs/caseflow/tree/main-gh-pages/schema/db_schema.md"
                  id="edit-this-page"
                  >Edit this page</a
                >
              </p>
            </div>
          </footer>
        </div>
      </div>
      <div class="search-overlay"></div>
    </div>
  </body>
</html>
