<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Schema Diagrams # The following subclass and ERD diagrams reflect entities in the Caseflow DB. You can also get the svg version by clicking on the diagrams below. The svg version of these diagrams facilitates text search (by opening the file in a web browser). These diagrams are automatically generated.
To Caseflow Engineers: These files are generated by running make docs and are saved in your local docs/schema directory (see PR #16371).">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="Schema Diagrams" />
<meta property="og:description" content="Schema Diagrams # The following subclass and ERD diagrams reflect entities in the Caseflow DB. You can also get the svg version by clicking on the diagrams below. The svg version of these diagrams facilitates text search (by opening the file in a web browser). These diagrams are automatically generated.
To Caseflow Engineers: These files are generated by running make docs and are saved in your local docs/schema directory (see PR #16371)." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://department-of-veterans-affairs.github.io/caseflow/task_trees/schema/schema_diagrams.html" /><meta property="article:section" content="schema" />



<title>Schema Diagrams | Task Trees &amp; DBs</title>
<link rel="manifest" href="/caseflow/task_trees/manifest.json">
<link rel="icon" href="/caseflow/task_trees/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/caseflow/task_trees/book.min.ca918a1851cb640f46d02aeb342f9722369ca7bdc4eda15d8d9048c31d455275.css" integrity="sha256-ypGKGFHLZA9G0CrrNC&#43;XIjacp73E7aFdjZBIwx1FUnU=" crossorigin="anonymous">
  <script defer src="/caseflow/task_trees/flexsearch.min.js"></script>
  <script defer src="/caseflow/task_trees/en.search.min.ac1c30825c160c9b3ec29556f460ac7cddd311b75efefb89a608e2bf83cccd46.js" integrity="sha256-rBwwglwWDJs&#43;wpVW9GCsfN3TEbde/vuJpgjiv4PMzUY=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/caseflow/task_trees/"><span>Task Trees &amp; DBs</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>












  
<aside>
  <ul>
<li><a href="/caseflow/">(Back to Caseflow)</a></li>
</ul>
<hr>
<ul>
<li>

<a href="/caseflow/task_trees/trees/roles/role-overview.html">Roles Overview</a></li>
<li>

<a href="/caseflow/task_trees/trees/tasks-overview.html">Tasks Overview</a></li>
</ul>


  <ul>
    
    
    
      
  
  
  
  
  
  <li id='menuitem-schema'>
      
     
    
      <input type="checkbox" id="input-schema" class="toggle"  checked />
    
    <label for="input-schema" class="flex justify-between hasactive ">
      <a href="/caseflow/task_trees/schema.html" class="hasactive ">
        DB Schemas
      </a>
    </label>

    
      <ul class="sub-menu">
        
        
        
          
  
  
  
  
  
  <li id='menuitem-a32031daf6826a3a658364c8ef641ca2'>
      
     
    
    <label for="input-a32031daf6826a3a658364c8ef641ca2" class="flex justify-between  active">
      <a href="/caseflow/task_trees/schema/schema_diagrams.html" class=" active">
        Schema Diagrams
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-4e3261ee60f20cb3c2f4ef840300d7ee'>
      
     
    
    <label for="input-4e3261ee60f20cb3c2f4ef840300d7ee" class="flex justify-between  ">
      <a href="/caseflow/task_trees/schema/caseflow_schema_csv.html" class=" ">
        Caseflow Schema CSV
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-etl'>
      
     
    
    <label for="input-etl" class="flex justify-between  ">
      <a href="/caseflow/task_trees/schema/etl.html" class=" ">
        ETL/ODS
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-80b3a20f34bcfa1497e53f6df98f9a1a'>
      
     
    
    <label for="input-80b3a20f34bcfa1497e53f6df98f9a1a" class="flex justify-between  ">
      <a href="/caseflow/task_trees/schema/etl_schema_csv.html" class=" ">
        ETL Schema CSV
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-510fcecf0cba28b1d0c46768d27ecd96'>
      
     
    
    <label for="input-510fcecf0cba28b1d0c46768d27ecd96" class="flex justify-between  ">
      <a href="/caseflow/task_trees/schema/vacols.html" class=" ">
        VACOLS
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-86d4ee7ca78396e350fefbdb82eae3d4'>
      
     
    
    <label for="input-86d4ee7ca78396e350fefbdb82eae3d4" class="flex justify-between  ">
      <a href="/caseflow/task_trees/schema/vacols_schema.html" class=" ">
        VACOLS Schema
      </a>
    </label>

    
  </li>

        
      </ul>
    
  </li>

    
      
  
  
  
  
  
  <li id='menuitem-data-model'>
      
     
    
      <input type="checkbox" id="input-data-model" class="toggle"  />
    
    <label for="input-data-model" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model.html" class=" ">
        Data Models
      </a>
    </label>

    
      <ul class="sub-menu">
        
        
        
          
  
  
  
  
  
  <li id='menuitem-d9a62a0a0731eac713a305003af79490'>
      
     
    
    <label for="input-d9a62a0a0731eac713a305003af79490" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/certification.html" class=" ">
        Caseflow Certification
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-b7f27412867a0a8e1e4953a63bf95106'>
      
     
    
    <label for="input-b7f27412867a0a8e1e4953a63bf95106" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/intake.html" class=" ">
        Caseflow Intake
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-fa3d69149400827fe11bd6ce3d9aa84b'>
      
     
    
    <label for="input-fa3d69149400827fe11bd6ce3d9aa84b" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/hearings.html" class=" ">
        Caseflow Hearings
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-527774a69e219f3c432838b1f74869ac'>
      
     
    
    <label for="input-527774a69e219f3c432838b1f74869ac" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/reader.html" class=" ">
        Caseflow Reader
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-eca58f638455b63e62ef87da8262aaea'>
      
     
    
    <label for="input-eca58f638455b63e62ef87da8262aaea" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/efolder_express.html" class=" ">
        eFolder Express
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-04e9d47bd2d7efdf6336448f0af7e675'>
      
     
    
    <label for="input-04e9d47bd2d7efdf6336448f0af7e675" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/queue.html" class=" ">
        Caseflow Queue
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-595643a3078a34fba5f27a8dbcfce9f2'>
      
     
    
    <label for="input-595643a3078a34fba5f27a8dbcfce9f2" class="flex justify-between  ">
      <a href="/caseflow/task_trees/data-model/dispatch.html" class=" ">
        Caseflow Dispatch
      </a>
    </label>

    
  </li>

        
      </ul>
    
  </li>

    
      
  
  
  
  
  
  <li id='menuitem-workflows'>
      
     
    
      <input type="checkbox" id="input-workflows" class="toggle"  />
    
    <label for="input-workflows" class="flex justify-between  ">
      <a href="/caseflow/task_trees/workflows.html" class=" ">
        Workflows
      </a>
    </label>

    
      <ul class="sub-menu">
        
        
        
          
  
  
  
  
  
  <li id='menuitem-edf4bada38d8b7d9cb267d0fad6cb482'>
      
     
    
    <label for="input-edf4bada38d8b7d9cb267d0fad6cb482" class="flex justify-between  ">
      <a href="/caseflow/task_trees/workflows/appeal-workflow.html" class=" ">
        Appeal Workflow
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-634712e82d20fc609167455d5ba6a3b0'>
      
     
    
    <label for="input-634712e82d20fc609167455d5ba6a3b0" class="flex justify-between  ">
      <a href="/caseflow/task_trees/workflows/intake-workflow.html" class=" ">
        Intake Workflow
      </a>
    </label>

    
  </li>

        
          
  
  
  
  
  
  <li id='menuitem-71a11ce05606820e012aa432ca8c93db'>
      
     
    
    <label for="input-71a11ce05606820e012aa432ca8c93db" class="flex justify-between  ">
      <a href="/caseflow/task_trees/workflows/hearing-workflow.html" class=" ">
        Hearing Workflow
      </a>
    </label>

    
  </li>

        
      </ul>
    
  </li>

    
  </ul>

  <ul>
<li>

<a href="/caseflow/task_trees/intro/task_trees.html">Task trees</a></li>
<li>

<a href="/caseflow/task_trees/trees/alltasks.html">All tasks</a>
<ul>
<li>

<a href="/caseflow/task_trees/trees/docket-DR/tasklist.html">DR tasklist</a>
<ul>
<li>

<a href="/caseflow/task_trees/trees/docket-DR/freq-parentchild.html">DR:parent-child</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-DR/freq-childparent.html">DR:child-parent</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-DR/freq-taskcreation.html">DR:task-creation</a></li>
</ul>
</li>
<li>

<a href="/caseflow/task_trees/trees/docket-ES/tasklist.html">ES tasklist</a>
<ul>
<li>

<a href="/caseflow/task_trees/trees/docket-ES/freq-parentchild.html">ES:parent-child</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-ES/freq-childparent.html">ES:child-parent</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-ES/freq-taskcreation.html">ES:task-creation</a></li>
</ul>
</li>
<li>

<a href="/caseflow/task_trees/trees/docket-H/tasklist.html">H tasklist</a>
<ul>
<li>

<a href="/caseflow/task_trees/trees/docket-H/freq-parentchild.html">H:parent-child</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-H/freq-childparent.html">H:child-parent</a></li>
<li>

<a href="/caseflow/task_trees/trees/docket-H/freq-taskcreation.html">H:task-creation</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>

<a href="/caseflow/task_trees/tags.html">Tags</a></li>
<li>

<a href="/caseflow/task_trees/categories.html">Categories</a></li>
</ul>

</aside>










</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/caseflow/task_trees/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Schema Diagrams</strong>

  <label for="toc-control">
    
    <img src="/caseflow/task_trees/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#caseflow-subclasses">Caseflow Subclasses</a></li>
        <li><a href="#caseflow-erd">Caseflow ERD</a></li>
        <li><a href="#caseflow-erd-with-subclasses">Caseflow ERD with Subclasses</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="schema-diagrams">
  Schema Diagrams
  <small><a class="anchor-heading" href="#schema-diagrams" aria-labelledby="schema-diagrams">#</a></small>
</h1>
<p>The following subclass and ERD diagrams reflect entities in the Caseflow DB. You can also get the <code>svg</code> version by clicking on the diagrams below. The <code>svg</code> version of these diagrams facilitates text search (by opening the file in a web browser). These diagrams are automatically generated.</p>
<p>To Caseflow Engineers: These files are generated by running <code>make docs</code> and are saved in your local <code>docs/schema</code> directory (see 

<a href="https://github.com/department-of-veterans-affairs/caseflow/pull/16371" target="_blank">PR #16371</a>). In that directory, the <code>svg</code> version of these diagrams facilitates text search, and the <code>dot</code> version allows you to manipulate the diagrams (for example using online Graphviz tools).</p>
<h3 id="caseflow-subclasses">
  Caseflow Subclasses
  <small><a class="anchor-heading" href="#caseflow-subclasses" aria-labelledby="caseflow-subclasses">#</a></small>
</h3>
<p>To help understand Caseflow&rsquo;s schema, let&rsquo;s start with DB tables that store <em>records</em> (a.k.a. DB rows) representing different 

<a href="https://guides.rubyonrails.org/active_record_basics.html" target="_blank">ActiveRecord</a> classes.
The following diagram shows ActiveRecord classes (and subclasses) associated with certain DB tables.</p>
<ul>
<li>Classes associated with the same DB table are indicated with the same color &ndash; this color-coding is used in subsequent diagrams.</li>
<li>These DB tables typically have a <code>type</code> column that indicates which ActiveRecord class is being represented by the record.</li>
<li>Blue-outlined rectangular nodes <em>typically</em> indicate abstract classes; while ellipses indicate concrete classes. The names of concrete classes are used to populate the <code>type</code> column.</li>
<li>Blue dotted edges/arrows indicate a subclass relationship.</li>
</ul>
<p>Notable observations:</p>
<ul>
<li>The <code>Appeal</code> class is a subclass of <code>DecisionReview</code>. <code>HigherLevelReview</code> and <code>SupplementalClaim</code> are subclasses of <code>ClaimReview</code>, which is a subclass of <code>DecisionReview</code>. This class hierarchy is mimicked by <code>DecisionReviewIntake</code>, <code>ClaimReviewIntake</code>, <code>HigherLevelReviewIntake</code> and <code>SupplementalClaimIntake</code>. However, all <code>*Intake</code> records are stored in the <code>intakes</code> table, whereas <code>Appeal</code>, <code>HigherLevelReview</code>, and <code>SupplementalClaim</code> records are stored in separate <code>appeals</code>, <code>higher_level_reviews</code>, and <code>supplemental_claims</code> tables respectively.</li>
<li>There are many Tasks and some are grouped under an abstract class. For example, the <code>ColocatedTask</code> abstract class groups many <code>*ColocatedTask</code>s. Similarly, there are abstract classes <code>JudgeTask</code>, <code>AttorneyTask</code>, <code>MailTask</code>, and <code>HearingAdminActionTask</code>.</li>
<li><code>Vso</code>, <code>FieldVso</code>, and <code>PrivateBar</code> are types of <code>Representative</code>s, which is a subclass of <code>Organization</code>.</li>
</ul>
<p><a href="make_docs/caseflow-subclasses.svg"> <img src="make_docs/caseflow-subclasses.png"/></a>
(

<a href="make_docs/caseflow-subclasses.dot">dot source</a>)</p>
<h3 id="caseflow-erd">
  Caseflow ERD
  <small><a class="anchor-heading" href="#caseflow-erd" aria-labelledby="caseflow-erd">#</a></small>
</h3>
<p>This next diagram is an Entity-Relationship Diagram (ERD), showing how ActiveRecord classes are associated with each other via some <code>*_id</code> column (e.g., foreign keys). The column name can be inferred from the edge label between two nodes. For example, a <code>Hearing</code> record is associated with a <code>HearingDay</code> via the <code>hearings.hearing_day_id</code> column &ndash; in the DB, there is a foreign key constraint from the <code>hearings</code> table to the <code>hearing_days</code> table.</p>
<ul>
<li>To reduce clutter, some abstract classes are consolidated into blue-outlined rectangular nodes containing a title. For example, the node with title <code>appeal_type</code> refers to the <code>Appeal</code> and <code>LegacyAppeal</code> classes. In Rails, this is a polymorphic association &ndash; hence a foreign key constraint cannot be added to the DB.</li>
<li>Many classes are associated with the <code>User</code> class. To reduce clutter, a <code>User</code> class is not drawn in the diagram. Instead, this is indicated with the text &ldquo;(assoc with User)&rdquo; for relevant classes to avoid drawing too many overlapping edges.</li>
<li>Additional color-coding has been applied to categorize certain nodes:
<ul>
<li>light blue: classes containing the string &ldquo;Hearings&rdquo; and classes related to hearings</li>
<li>red: classes related to completion of a significant step (e.g., <code>ClaimEstablishment</code>, <code>JudgeCaseReview</code>, <code>DecisionDocument</code>, <code>DecisionIssue</code>, <code>BoardGrantEffectuation</code>)</li>
</ul>
</li>
<li>Light gray rectangular nodes with 2 rectangular notches indicate join tables (e.g., <code>OrganizationsUser</code>, <code>RequestDecisionIssue</code>), which associate records in 2 other tables.</li>
<li>Purple edges/arrows indicate custom relationships manually added to the diagram.</li>
<li>Solid blue edges/arrows indicate polymorphic relationships between tables.</li>
</ul>
<p>Notable observations:</p>
<ul>
<li><code>DecisionReviewIntake</code> (<code>intakes</code> table) has a polymorphic association to <code>DecisionReview</code> (abstract class) via the <code>detail_id</code> column. However, each type of intake class maps to a specific table.
<ul>
<li><code>AppealIntake</code> class maps to the <code>appeals</code> table (a.k.a. <code>Appeal</code> class).</li>
<li><code>HigherLevelReviewIntake</code> class maps to the <code>higher_level_reviews</code> table (a.k.a. <code>HigherLevelReview</code> class).</li>
<li><code>SupplementalClaimIntake</code> class maps to the <code>supplemental_claims</code> table (a.k.a. <code>SupplementalClaim</code> class).</li>
<li><code>RampElectionIntake</code> class maps to the <code>ramp_elections</code> table (a.k.a. <code>RampElection</code> class).</li>
<li><code>RampRefilingIntake</code> class maps to the <code>ramp_refilings</code> table (a.k.a. <code>RampRefiling</code> class).</li>
</ul>
</li>
<li><code>AppealStreamSnapshot</code> (<code>hearing_appeal_stream_snapshots</code> table) maps a <code>LegacyHearing</code> with a <code>LegacyAppeal</code>. This association is also available in the <code>legacy_hearings</code> table via <code>appeal_id</code>. Perhaps <code>AppealStreamSnapshot</code> should be deprecated.</li>
<li><code>AppealStreamSnapshot</code>, <code>AppealSeries</code>, <code>LegacyHearing</code>, <code>ClaimEstablishment</code>, <code>Dispatch::Task</code>, <code>EstablishClaim</code>, and <code>WorksheetIssue</code> only exists to support <code>LegacyAppeal</code>s.</li>
<li><code>CavcRemand</code>, <code>AppellantSubstitution</code>, and <code>DocketSwitch</code> reference two different <code>Appeal</code>s.</li>
<li><code>Task</code> can be <code>assigned_to</code> a <code>User</code> or <code>Organization</code>, as indicated by the <code>assigned_to_type</code> column.</li>
<li>The nodes labeled <code>decision_review_type</code>, <code>review_type</code>, and <code>decision_review_remanded_type</code> are synonyms. The naming difference is an artifact of different column names for the associations.</li>
</ul>
<p><a href="make_docs/caseflow-belongs_to_erd.svg"> <img src="make_docs/caseflow-belongs_to_erd.png"/></a>
(

<a href="make_docs/caseflow-belongs_to_erd.dot">dot source</a>)</p>
<h3 id="caseflow-erd-with-subclasses">
  Caseflow ERD with Subclasses
  <small><a class="anchor-heading" href="#caseflow-erd-with-subclasses" aria-labelledby="caseflow-erd-with-subclasses">#</a></small>
</h3>
<p>This next diagram combines the above two diagrams.</p>
<p><a href="make_docs/caseflow-belongs_to_erd-subclasses.svg"> <img src="make_docs/caseflow-belongs_to_erd-subclasses.png"/></a>
(

<a href="make_docs/caseflow-belongs_to_erd-subclasses.dot">dot source</a>)</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">




  <div>
    <a class="flex align-center" href="https://github.com/department-of-veterans-affairs/caseflow/tree/main-gh-pages/__task_trees/content/schema/schema_diagrams.md" target="_blank" rel="noopener">
      <img src="/caseflow/task_trees/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#caseflow-subclasses">Caseflow Subclasses</a></li>
        <li><a href="#caseflow-erd">Caseflow ERD</a></li>
        <li><a href="#caseflow-erd-with-subclasses">Caseflow ERD with Subclasses</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












